<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>The LAST Million | Ø§Ù„Ø¹Ø±ÙŠÙ†</title>
    <style>
        body { background: #050505; color: gold; font-family: 'Cairo', sans-serif; margin: 0; touch-action: none; overflow: hidden; }
        #app { display: flex; flex-direction: column; height: 100vh; text-align: center; }
        
        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø³ÙˆÙŠØ¨ (Ø§Ù„Ø£Ø³Ø¯) */
        #mining-zone { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; }
        #lion { width: 250px; transition: transform 0.1s; z-index: 10; }
        
        /* Ø§Ù„Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø³Ø­Ø±ÙŠØ© Ø®Ù„Ù Ø§Ù„Ø£Ø³Ø¯ */
        #magic-gate { position: absolute; width: 300px; height: 350px; border: 5px solid rgba(255,215,0,0.1); border-radius: 50% 50% 0 0; z-index: 1; transition: 2s; }
        .gate-open { border-color: gold !important; box-shadow: 0 0 50px gold; background: rgba(255,215,0,0.2); }

        /* Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†ÙÙÙØ³ */
        .breath-meter { width: 80%; height: 10px; background: #222; margin: 20px auto; border-radius: 5px; }
        #breath-fill { width: 0%; height: 100%; background: linear-gradient(90deg, #ff4500, #ffd700); }

        .instruction { font-size: 14px; color: #888; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }
        .evolve-anim { animation: grow 1.5s forwards; }
        @keyframes grow { 0% { transform: scale(1); } 50% { transform: scale(1.5); filter: brightness(2); } 100% { transform: scale(1.2); } }
    </style>
</head>
<body>

<div id="app">
    <div style="padding: 20px; font-weight: bold;">Ø±ØµÙŠØ¯Ùƒ: <span id="dust">0</span> ØºØ¨Ø§Ø± $LAST</div>

    <div id="mining-zone" id="touch-area">
        <img id="owl" src="owl.png" style="position:absolute; top:10px; right:10px; width:60px;">
        <img id="monkey" src="monkey.png" style="position:absolute; top:10px; left:10px; width:70px; display:none;">
        
        <div id="magic-gate"></div>
        <img id="lion" src="shibl.png" alt="Lion">
        
        <p id="hint" class="instruction">Ø§Ø³Ø­Ø¨ (Swipe) Ù„Ù„ÙŠÙ…ÙŠÙ† ÙˆØ§Ù„ÙŠØ³Ø§Ø± Ù„Ù„Ø­ÙØ±!</p>
    </div>

    <div class="breath-meter"><div id="breath-fill"></div></div>
    <div style="padding: 20px;" id="status">Ù†ÙÙÙØ³ Ø§Ù„Ø´Ø¨Ù„: 15 Ø«Ø§Ù†ÙŠØ©</div>
</div>

<script>
    let dust = 0;
    let isEvolved = false;
    let startTime = null;
    let lastX = 0;
    let swipeCount = 0;

    const lion = document.getElementById('lion');
    const breathFill = document.getElementById('breath-fill');
    const status = document.getElementById('status');

    // Ù…ÙŠÙƒØ§Ù†ÙŠÙƒØ§ Ø§Ù„Ø³ÙˆÙŠØ¨ (Swipe)
    window.addEventListener('touchstart', e => { lastX = e.touches[0].clientX; if(!startTime) startTime = Date.now(); });
    
    window.addEventListener('touchmove', e => {
        let currentX = e.touches[0].clientX;
        let diff = Math.abs(currentX - lastX);
        
        if (diff > 10) { // Ø­Ø±ÙƒØ© Ø³ÙˆÙŠØ¨ Ø­Ù‚ÙŠÙ‚ÙŠØ©
            swipeCount++;
            lastX = currentX;
            lion.style.transform = `translateX(${currentX % 10 - 5}px) rotate(${currentX % 4 - 2}deg)`;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø¯Ù… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙ‚Øª (15 Ø«Ø§Ù†ÙŠØ© Ù„Ù„Ø´Ø¨Ù„)
            let elapsed = (Date.now() - startTime) / 1000;
            let limit = isEvolved ? 5 : 15;
            let progress = (elapsed / limit) * 100;
            
            if (progress <= 100) {
                breathFill.style.width = progress + "%";
                status.innerText = `Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ±... Ù†ÙÙÙØ³ Ø¨Ø§Ù‚Ù: ${Math.ceil(limit - elapsed)}Ø«`;
            } else {
                finishMining();
            }
        }
    });

    function finishMining() {
        dust += isEvolved ? 50 : 10;
        document.getElementById('dust').innerText = dust;
        startTime = null;
        breathFill.style.width = "0%";
        status.innerText = "ÙƒÙÙˆ! Ø®Ø° Ù†ÙÙÙØ³ ÙˆØ§Ø¨Ø¯Ø£ ØªØ§Ù†ÙŠ.";
        
        // Ù„Ø­Ø¸Ø© Ø§Ù„ØªØ·ÙˆØ± (Ø§Ù„ØªØ­ÙˆÙ„ Ù„Ø£Ø³Ø¯ ÙˆÙØªØ­ Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©)
        if (dust >= 100 && !isEvolved) {
            evolve();
        }
    }

    function evolve() {
        isEvolved = true;
        lion.classList.add('evolve-anim');
        document.getElementById('magic-gate').classList.add('gate-open');
        document.getElementById('hint').innerText = "Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ø£Ø³Ø¯! Ø§Ù„Ø³ÙˆÙŠØ¨ Ø£Ø³Ø±Ø¹ (5 Ø«ÙˆØ§Ù†ÙŠ)";
        
        setTimeout(() => {
            lion.src = "lion_king.png"; // Ø§Ù„Ø£Ø³Ø¯ Ø§Ù„ÙƒØ¨ÙŠØ±
            document.getElementById('owl').style.display = "none";
            document.getElementById('monkey').style.display = "block"; // Ø§Ù„Ù‚Ø±Ø¯ ÙŠØ¸Ù‡Ø±
            alert("ğŸš¨ Ø³Ø­Ù‚Øª ÙƒÙ„Ø§Ø¨ Ø§Ù„ØµÙŠØ§Ø¯! Ø§Ù„Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø³Ø­Ø±ÙŠØ© Ø§Ù†ÙØªØ­Øª ÙˆØ§Ù„Ù‚Ø±Ø¯ Ø§Ø³ØªÙ„Ù… Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©.");
        }, 1500);
    }
</script>
</body>
</html>
