Ù<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>THE LAST MILLION | Ø§Ù„Ø¹Ø±ÙŠÙ†</title>
    <style>
        body {
            margin: 0;
            overflow: hidden; /* Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø³ÙƒØ±ÙˆÙ„ Ù†Ù‡Ø§Ø¦ÙŠ */
            background-color: #1a472a; /* Ù„ÙˆÙ† Ø§Ù„ØºØ§Ø¨Ø© Ø§Ù„ØºØ§Ù…Ù‚ */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            touch-action: none; /* Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹ Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø¹Ø´Ø§Ù† Ø§Ù„Ø³Ø­Ø¨ ÙŠØ´ØªØºÙ„ */
        }

        /* Ø£Ø±Ø¶ÙŠØ© Ø§Ù„ØºØ§Ø¨Ø© */
        #game-area {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-image: repeating-linear-gradient(45deg, #1e5230 25%, transparent 25%, transparent 75%, #1e5230 75%, #1e5230), repeating-linear-gradient(45deg, #1e5230 25%, #1a472a 25%, #1a472a 75%, #1e5230 75%, #1e5230);
            background-position: 0 0, 10px 10px;
            background-size: 20px 20px;
        }

        /* Ø§Ù„Ø´Ø¨Ù„ (Ø§Ù„Ù„Ø§Ø¹Ø¨) */
        #hero {
            position: absolute;
            width: 80px;  /* Ø­Ø¬Ù… Ø§Ù„Ø´Ø¨Ù„ */
            height: 80px;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            pointer-events: none; /* Ø¹Ø´Ø§Ù† ØµØ¨Ø§Ø¹Ùƒ Ù…Ø§ÙŠØºØ·ÙŠØ´ Ø¹Ù„ÙŠÙ‡ */
            will-change: transform, left, top; /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ */
        }
        
        /* ØµÙˆØ±Ø© Ø§Ù„Ø´Ø¨Ù„ */
        #hero img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: drop-shadow(0 10px 5px rgba(0,0,0,0.3)); /* Ø¸Ù„ Ø¹Ø´Ø§Ù† ÙŠØ¨Ø§Ù† Ù…Ø¬Ø³Ù… */
        }

        /* Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ØªØ­ÙƒÙ… ØªØ­Øª Ø§Ù„ØµØ¨Ø§Ø¹ (Ø¹Ø´Ø§Ù† ØªØ¹Ø±Ù Ø§Ù†Øª Ø¯Ø§ÙŠØ³ ÙÙŠÙ†) */
        #joystick-indicator {
            position: absolute;
            width: 50px; height: 50px;
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            display: none;
            pointer-events: none;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }

        /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø§Ù„Ø±ØµÙŠØ¯) */
        .ui-panel {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: #ffd700;
            padding: 10px 25px;
            border-radius: 20px;
            border: 2px solid #ffd700;
            font-weight: bold;
            z-index: 100;
            pointer-events: none; /* Ø¹Ø´Ø§Ù† Ù…Ø§ ØªØ¹Ø·Ù„Ø´ Ø§Ù„Ù„Ø¹Ø¨ */
        }

        /* Ø±Ø³Ø§Ù„Ø© ØªÙˆØ¬ÙŠÙ‡ */
        .tutorial {
            position: fixed; bottom: 50px; width: 100%; text-align: center;
            color: rgba(255,255,255,0.6); font-size: 14px; pointer-events: none;
        }
    </style>
</head>
<body>

    <div id="game-area">
        <div class="ui-panel">ğŸ¦ $LAST: <span id="score">0.0000</span></div>
        
        <div id="hero">
            <img src="https://cdn-icons-png.flaticon.com/512/616/616430.png" id="hero-img">
        </div>

        <div id="joystick-indicator"></div>
        
        <div class="tutorial">Ø§Ø³Ø­Ø¨ ØµØ¨Ø§Ø¹Ùƒ ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù† Ù„ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø´Ø¨Ù„</div>
    </div>

<script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
    const hero = document.getElementById('hero');
    const heroImg = document.getElementById('hero-img');
    const gameArea = document.getElementById('game-area');
    const indicator = document.getElementById('joystick-indicator');
    const scoreEl = document.getElementById('score');

    // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø­Ø±ÙƒØ© (Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡)
    let heroX = window.innerWidth / 2;
    let heroY = window.innerHeight / 2;
    let targetX = heroX;
    let targetY = heroY;
    let isMoving = false;
    let score = 0;

    // Ø³Ø±Ø¹Ø© Ø§Ù„Ù„Ø­Ø§Ù‚ (0.1 = Ù†Ø§Ø¹Ù… ÙˆØ¨Ø·ÙŠØ¡ / 0.3 = Ø³Ø±ÙŠØ¹ ÙˆØ­Ø§Ø¯)
    const smoothFactor = 0.15; 

    // --- Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ù„Ù…Ø³ (Ø§Ù„ØªØ­ÙƒÙ…) ---
    
    // Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
    gameArea.addEventListener('touchstart', startMove, {passive: false});
    gameArea.addEventListener('touchmove', move, {passive: false});
    gameArea.addEventListener('touchend', endMove);

    // Ù„Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (Ø§Ù„Ù…Ø§ÙˆØ³)
    gameArea.addEventListener('mousedown', startMove);
    document.addEventListener('mousemove', (e) => { if(isMoving) move(e); });
    document.addEventListener('mouseup', endMove);

    function startMove(e) {
        isMoving = true;
        indicator.style.display = 'block';
        updateTarget(e);
    }

    function move(e) {
        if(!isMoving) return;
        e.preventDefault(); // Ù…Ù†Ø¹ Ø§Ù„ØµÙØ­Ø© Ù…Ù† Ø§Ù„Ø³ÙƒØ±ÙˆÙ„
        updateTarget(e);
    }

    function endMove() {
        isMoving = false;
        indicator.style.display = 'none';
    }

    function updateTarget(e) {
        // Ø­Ø³Ø§Ø¨ Ù…ÙƒØ§Ù† Ø§Ù„ØµØ¨Ø§Ø¹/Ø§Ù„Ù…Ø§ÙˆØ³
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;
        
        targetX = clientX;
        targetY = clientY;

        // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù…Ø¤Ø´Ø± ØªØ­Øª Ø§Ù„ØµØ¨Ø§Ø¹
        indicator.style.left = clientX + 'px';
        indicator.style.top = clientY + 'px';
    }

    // --- Ù…Ø­Ø±Ùƒ Ø§Ù„Ù„Ø¹Ø¨Ø© (Game Loop) ---
    // Ø¯ÙŠ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù„ÙŠ Ø¨ØªØ´ØªØºÙ„ 60 Ù…Ø±Ø© ÙÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø¹Ø´Ø§Ù† Ø§Ù„Ø­Ø±ÙƒØ© ØªÙƒÙˆÙ† Ù†Ø§Ø¹Ù…Ø©
    function gameLoop() {
        if (isMoving) {
            // Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù†Ø§Ø¹Ù…Ø© (Lerp)
            // Ø§Ù„Ø´Ø¨Ù„ Ø¨ÙŠØªØ­Ø±Ùƒ Ù…Ø³Ø§ÙØ© ØµØºÙŠØ±Ø© Ù†Ø§Ø­ÙŠØ© Ø§Ù„Ù‡Ø¯Ù ÙÙŠ ÙƒÙ„ ÙØ±ÙŠÙ…
            const dx = targetX - heroX;
            const dy = targetY - heroY;
            
            heroX += dx * smoothFactor;
            heroY += dy * smoothFactor;

            // ØªØºÙŠÙŠØ± Ø§ØªØ¬Ø§Ù‡ ÙˆØ´ Ø§Ù„Ø´Ø¨Ù„ (ÙŠÙ…ÙŠÙ†/Ø´Ù…Ø§Ù„)
            if (dx > 5) {
                heroImg.style.transform = "scaleX(-1)"; // ÙˆØ´ ÙŠÙ…ÙŠÙ†
            } else if (dx < -5) {
                heroImg.style.transform = "scaleX(1)"; // ÙˆØ´ Ø´Ù…Ø§Ù„
            }

            // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø³ÙƒÙˆØ± ÙˆÙ‡Ù…ÙŠØ© Ø¹Ø´Ø§Ù† ØªØ­Ø³ Ø¨Ø§Ù„Ù„Ø¹Ø¨
            score += 0.0001;
            scoreEl.innerText = score.toFixed(4);
        } else {
            // Ù„Ùˆ ÙˆØ§Ù‚ÙØŒ Ø®Ù„ÙŠÙ‡ ÙŠØªÙ†ÙØ³ (ÙŠÙƒØ¨Ø± ÙˆÙŠØµØºØ± Ø´ÙˆÙŠØ©)
            // Ø¯ÙŠ Ù‡Ù†Ø¹Ù…Ù„Ù‡Ø§ Ø¨Ù€ CSS animation Ø¨Ø³ Ù‡Ù†Ø§ Ù„Ù„ØªÙˆØ¶ÙŠØ­
        }

        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ø±ÙƒØ© Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù†ØµØ±
        hero.style.left = heroX + 'px';
        hero.style.top = heroY + 'px';

        // Ø·Ù„Ø¨ Ø§Ù„ÙØ±ÙŠÙ… Ø§Ù„Ù„ÙŠ Ø¨Ø¹Ø¯Ù‡
        requestAnimationFrame(gameLoop);
    }

    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø­Ø±Ùƒ
    gameLoop();

</script>
</body>
</html>
