<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE LAST MILLION</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <style>
        body { background: #000; color: #d4af37; font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        #app { width: 90%; max-width: 400px; text-align: center; border: 1px solid #d4af37; padding: 20px; border-radius: 15px; background: #111; }
        .lake { background: #000; height: 200px; overflow-y: auto; border: 1px solid #333; margin: 15px 0; padding: 10px; text-align: right; }
        input { background: #000; border: 1px solid #d4af37; color: #fff; padding: 10px; width: 70%; margin: 10px 0; }
        button { background: #d4af37; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; }
        #main-section { display: none; }
    </style>
</head>
<body>
    <div id="app">
        <div id="gate-section">
            <h1>ğŸ¦‰ Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©</h1>
            <p>Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠÙ†Ù…Ùˆ ÙƒÙ„Ù…Ø§ Ø£Ø®Ø°Øª Ù…Ù†Ù‡ØŸ</p>
            <input type="text" id="gate-ans" placeholder="Ø§Ù„Ø­Ù„...">
            <button onclick="unlock()">Ø¯Ø®ÙˆÙ„</button>
        </div>
        <div id="main-section">
            <h1>ğŸ¦ Ø§Ù„Ø¹Ø±ÙŠÙ†</h1>
            <div id="bal" style="font-size: 1.5rem; margin-bottom: 10px;">0.0000</div>
            <div class="lake" id="lake"></div>
            <input type="text" id="msg-input" placeholder="Ø²Ø¦ÙŠØ±...">
            <button onclick="sendMsg()">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
    </div>
<script>
    const firebaseConfig = {
        apiKey: "AIzaSyCegNsEjJJDqVQK80If3lvHUKHBACBkP8U",
        authDomain: "thelastmillion-b4e69.firebaseapp.com",
        databaseURL: "https://thelastmillion-b4e69-default-rtdb.firebaseio.com",
        projectId: "thelastmillion-b4e69",
        storageBucket: "thelastmillion-b4e69.firebasestorage.app",
        messagingSenderId: "667969923379",
        appId: "1:667969923379:web:f439369a7056da14cff646"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
</script>
  <script>
    let userRank = "Ø´Ø¨Ù„"; // Ø§Ù„Ù„Ù‚Ø¨ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ

    function unlock() {
        const a = document.getElementById('gate-ans').value;
        if(a.includes("Ø­ÙØ±") || a.includes("Ù…Ù„Ùƒ")) {
            // Ø³Ø¤Ø§Ù„ Ø§Ù„Ø¹Ø§Ø¨Ø± Ø¹Ù† Ù„Ù‚Ø¨Ù‡ Ù‚Ø¨Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            let name = prompt("Ù„Ù‚Ø¯ Ø¹Ø¨Ø±Øª Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©.. ÙØ¨Ø£ÙŠ Ù„Ù‚Ø¨ Ø³ØªÙØ¹Ø±Ù ÙÙŠ Ø§Ù„Ø¹Ø±ÙŠÙ†ØŸ", "Ø£Ø³Ø¯ Ù…Ø¬Ù‡ÙˆÙ„");
            userRank = name ? name : "Ø£Ø³Ø¯ Ù…Ø¬Ù‡ÙˆÙ„";
            
            document.getElementById('gate-section').style.display = 'none';
            document.getElementById('main-section').style.display = 'block';
            startSystem();
        } else { alert("Ø§Ù„Ø¨ÙˆÙ…Ø© ØªÙ…Ù†Ø¹Ùƒ Ù…Ù† Ø§Ù„Ø¹Ø¨ÙˆØ±!"); }
    }

    function startSystem() {
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØ¹Ø±Ø¶Ù‡Ø§ Ø¨Ø§Ù„Ù„Ù‚Ø¨
        db.ref('lake').limitToLast(15).on('child_added', (s) => {
            const d = s.val();
            const time = new Date(d.time).toLocaleTimeString('ar-EG', {hour: '2-digit', minute:'2-digit'});
            document.getElementById('lake').innerHTML += `
                <div class="bubble">
                    <span style="color:#d4af37">[${d.rank || 'Ø¹Ø§Ø¨Ø±'}]</span>: ${d.text} 
                    <small style="font-size:0.6rem; color:#444; float:left">${time}</small>
                </div>`;
            document.getElementById('lake').scrollTop = document.getElementById('lake').scrollHeight;
        });
        
        // Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ù„ÙƒÙŠ
        let b = 0; setInterval(() => { b += 0.0001; document.getElementById('bal').innerText = b.toFixed(4); }, 2000);
    }

    function sendMsg() {
        const m = document.getElementById('msg-input').value;
        if(m.trim()) { 
            db.ref('lake').push({ 
                text: m, 
                rank: userRank, // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù„Ù‚Ø¨ Ù…Ø¹ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                time: Date.now() 
            }); 
            document.getElementById('msg-input').value = ''; 
        }
    }
</script>
 
